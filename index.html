<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Chatbot Tomie - Advanced</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      background-color: #f0f0f0;
      margin: 0;
      padding: 0;
    }
    .chat-container {
      position: fixed;
      bottom: 20px;
      right: 20px;
      width: 350px;
      background-color: white;
      border: 1px solid #ccc;
      border-radius: 8px;
      box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
      padding: 10px;
    }
    .chat-header {
      font-weight: bold;
      text-align: center;
      background-color: #007bff;
      color: white;
      padding: 8px;
      border-radius: 8px 8px 0 0;
    }
    .chat-box {
      height: 300px;
      overflow-y: auto;
      padding: 5px;
      margin-top: 10px;
      border: 1px solid #ccc;
      border-radius: 8px;
      background-color: #f9f9f9;
    }
    .input-container {
      display: flex;
      margin-top: 10px;
    }
    input[type="text"] {
      width: 100%;
      padding: 8px;
      border: 1px solid #ccc;
      border-radius: 4px;
    }
    button {
      padding: 8px;
      border: none;
      background-color: #007bff;
      color: white;
      font-size: 14px;
      border-radius: 4px;
      margin-left: 5px;
    }
    .suggestions {
      margin-top: 10px;
      display: flex;
      flex-wrap: wrap;
      gap: 5px;
    }
    .suggestion-btn {
      background-color: #007bff;
      color: white;
      padding: 6px 12px;
      border-radius: 4px;
      font-size: 12px;
      cursor: pointer;
    }
  </style>
</head>
<body>

  <div class="chat-container">
    <div class="chat-header">Tomie - Your Assistant</div>
    <div class="chat-box" id="chatBox"></div>
    <div class="input-container">
      <input type="text" id="userInput" placeholder="Ask me something..." />
      <button onclick="sendMessage()">Send</button>
    </div>
    <div class="suggestions" id="suggestions"></div>
  </div>

  <script>
    const chatBox = document.getElementById('chatBox');
    const userInput = document.getElementById('userInput');
    const suggestions = document.getElementById('suggestions');

    // Store states for user interaction flow
    let conversationState = "start";

    // Append message to chat
    function appendMessage(text, sender) {
      const messageDiv = document.createElement('div');
      messageDiv.textContent = text;
      messageDiv.style.marginBottom = '10px';
      messageDiv.style.padding = '8px';
      messageDiv.style.backgroundColor = sender === 'user' ? '#e6f7ff' : '#f1f1f1';
      messageDiv.style.borderRadius = '5px';
      messageDiv.style.wordWrap = 'break-word';
      if (sender === 'user') {
        messageDiv.style.textAlign = 'right';
      }
      chatBox.appendChild(messageDiv);
      chatBox.scrollTop = chatBox.scrollHeight;
    }

    // Generate smart response based on user input and conversation state
    function generateResponse(inputText) {
      let response = '';

      // Check conversation state
      if (conversationState === "start") {
        response = "Hello! How can I assist you today? You can ask about our services like Process, Pricing, Privacy Policy, or Terms.";
        conversationState = "askForService";
        showSuggestions(["Process", "Pricing", "Privacy Policy", "Terms of Service"]);
      } 
      else if (conversationState === "askForService") {
        if (inputText.includes('process')) {
          response = 'We follow a structured process: 1) Initial Consultation, 2) Proposal and Quotation, 3) Agreement and Deposit, 4) Development Phase, 5) Testing and Review, 6) Final Delivery and Payment, 7) Ongoing Support.';
        } else if (inputText.includes('pricing')) {
          response = 'Our pricing packages range from R3,000 to R25,000 based on your needs. Let me know if you need details on specific packages.';
        } else if (inputText.includes('privacy policy')) {
          response = 'We take privacy seriously. We ensure your data is protected and not shared without your consent. Our policy outlines how we handle your personal information.';
        } else if (inputText.includes('terms of service')) {
          response = 'Our Terms of Service cover project agreements, payment terms, intellectual property rights, and more. Let me know if you want specific details.';
        } else {
          response = "Sorry, I didn't quite understand that. Please select one of the topics or type your question again.";
          showSuggestions(["Process", "Pricing", "Privacy Policy", "Terms of Service"]);
        }
        conversationState = "waitForDetails";
      } 
      else if (conversationState === "waitForDetails") {
        response = "Is there anything else you'd like to know or any specific detail you'd like me to explain?";
        conversationState = "askForService";
      }

      setTimeout(() => {
        appendMessage(response, 'bot');
        if (conversationState === "askForService") {
          showSuggestions(["Process", "Pricing", "Privacy Policy", "Terms of Service"]);
        }
      }, 1000);
    }

    // Show suggestion buttons for the user to choose from
    function showSuggestions(options) {
      suggestions.innerHTML = '';
      options.forEach(option => {
        const button = document.createElement('button');
        button.classList.add('suggestion-btn');
        button.textContent = option;
        button.onclick = () => {
          userInput.value = option;
          sendMessage();
        };
        suggestions.appendChild(button);
      });
    }

    // Send user message and generate bot response
    function sendMessage() {
      const inputText = userInput.value.trim();
      if (inputText !== '') {
        appendMessage(inputText, 'user');
        userInput.value = '';
        generateResponse(inputText.toLowerCase());
      }
    }
  </script>

</body>
</html>
